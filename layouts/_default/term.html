{{ define "main" }}
<section class="w-full mb-12 text-center">
    <h1 class="font-display text-3xl font-bold text-gray-800 dark:text-white mb-2">
        #{{ .Title }}
    </h1>
    <p class="text-gray-500 dark:text-gray-400">{{ len .Pages }} posts</p>
</section>

<div class="flex flex-col gap-6 md:gap-8 w-full max-w-3xl mx-auto">
    {{ range .Pages }}
    <a class="group flex flex-col sm:flex-row items-start gap-4 sm:gap-6 py-5 border-b border-[#f1f3f3] dark:border-gray-800/50 hover:border-primary/20 transition-all hover:bg-white/40 dark:hover:bg-white/5 -mx-4 px-4 rounded-xl" href="{{ .RelPermalink }}">
        <span class="font-sans text-xs font-bold text-gray-400 dark:text-gray-500 sm:w-20 shrink-0 pt-2 group-hover:text-primary transition-colors">{{ .Date.Format "2006.01.02" }}</span>

        {{ $image := "" }}
        {{ with .Resources.GetMatch .Params.featuredImagePreview }}
            {{ $image = .Resize "300x webp q80" }}
        {{ else }}
            {{ with .Resources.GetMatch .Params.featuredImage }}
                {{ $image = .Resize "300x webp q80" }}
            {{ end }}
        {{ end }}

        {{ with $image }}
        <div class="w-full sm:w-32 h-40 sm:h-20 shrink-0 rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-800">
            <img alt="{{ .Params.title }}" class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500" src="{{ .RelPermalink }}"/>
        </div>
        {{ end }}

        <div class="flex flex-col gap-1.5 flex-1 min-w-0">
            <span class="font-display text-lg font-bold text-gray-800 dark:text-gray-100 group-hover:text-primary transition-colors leading-snug">{{ .Title }}</span>
            <span class="text-sm text-gray-500 dark:text-gray-400 font-sans opacity-80 group-hover:opacity-100 transition-opacity line-clamp-2">{{ .Summary }}</span>
        </div>
    </a>
    {{ end }}
</div>

{{ end }}
