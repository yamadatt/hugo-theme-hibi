{{/* Params (PascalCase): Page, Site, ImageSize, ImageClass, WrapperClass, DateFormat, DateWidthClass, SummaryClass, TitleClass */}}
{{- $page := .Page -}}
{{- $imageSize := .ImageSize | default (.Site.Params.images.cardCompact | default "300x webp q80") -}}
{{- $imageClass := .ImageClass | default "w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500" -}}
{{- $wrapperClass := .WrapperClass | default "group flex flex-col sm:flex-row items-start gap-4 sm:gap-6 py-5 border-b border-[#f1f3f3] dark:border-gray-800/50 hover:border-primary/20 transition-all hover:bg-white/40 dark:hover:bg-white/5 -mx-4 px-4 rounded-xl" -}}
{{- $dateFormat := .DateFormat | default "2006.01.02" -}}
{{- $dateWidthClass := .DateWidthClass | default "sm:w-20" -}}
{{- $summaryClass := .SummaryClass | default "text-sm text-gray-500 dark:text-gray-400 font-sans opacity-80 group-hover:opacity-100 transition-opacity line-clamp-2" -}}
{{- $titleClass := .TitleClass | default "font-display text-lg font-bold text-gray-800 dark:text-gray-100 group-hover:text-primary transition-colors leading-snug" -}}
{{- $pageLink := $page.RelPermalink -}}
{{- $pageTitle := $page.Title -}}

<a class="{{ $wrapperClass }}" href="{{ $pageLink }}">
    <span class="font-sans text-xs font-bold text-gray-400 dark:text-gray-500 {{ $dateWidthClass }} shrink-0 pt-2 group-hover:text-primary transition-colors">{{ $page.Date.Format $dateFormat }}</span>

    {{- $image := "" -}}
    {{- with $page.Resources.GetMatch $page.Params.featuredImagePreview -}}
        {{- $image = .Resize $imageSize -}}
    {{- else -}}
        {{- with $page.Resources.GetMatch $page.Params.featuredImage -}}
            {{- $image = .Resize $imageSize -}}
        {{- end -}}
    {{- end -}}

    {{- with $image -}}
    <div class="w-full sm:w-32 h-40 sm:h-20 shrink-0 rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-800">
        <img alt="{{ $pageTitle }}" class="{{ $imageClass }}" src="{{ .RelPermalink }}"/>
    </div>
    {{- end -}}

    <div class="flex flex-col gap-1.5 flex-1 min-w-0">
        <span class="{{ $titleClass }}">{{ $pageTitle }}</span>
        <span class="{{ $summaryClass }}">
            {{- $summaryTruncate := .SummaryTruncate | default 0 -}}
            {{- if gt $summaryTruncate 0 -}}
                {{- $page.Summary | truncate $summaryTruncate -}}
            {{- else -}}
                {{- $page.Summary -}}
            {{- end -}}
        </span>
    </div>
</a>
